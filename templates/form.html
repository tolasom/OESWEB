{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  {% block extra_css %}
  <!-- Primero, incluir la libreria de JpegCam -->
  <script src="/static/jpegcam/webcam.js"></script>

  {% endblock extra_css %}
    <link rel="apple-touch-icon" sizes="76x76" href="../static/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../static/img/kit-11.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" /> -->
  <title>
    {% block title %}
    KIT Online Exam
    {% endblock title %}
  </title>
  <style>
    h1 {
      font-size: 2em;
      font-weight: bold;
      color: #777777;
      text-align: center
    }
    table {
      margin: auto;
    }

    /* The Modal or pop up*/
.modal {
    display: none; /* Hidden by default */
    position: fixed;  /*Stay in place*/
     /*overflow:scroll;*/
    z-index: 1; /* Sit on top */
    padding-top: 100px;  /*Location of the box*/ 
    left: 0;
    top: 0;
   
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 50px;
    border: 1px solid #888;
    width: 80%;
    color: #936c6c;
}

/* The Close Button */
.close {
    color: #aaaaaa;
    float: right;
    margin-left: 10px;
    margin-top: 5px;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}
/*end pop up*/
    input[type=submit] {
    width: 45%;
    background-color: #04043E;
    margin-top: 10px;
    color: white;
    padding: 11px 0px;
    margin-bottom: 30px;
    /*margin: 8px 0;*/
    border: none;
    /*margin-left: 200px;*/
    border-radius: 4px;
    cursor: pointer;
}

input[type=submit]:hover {
    background-color: green;
}
body {font-size:100%}
  </style>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
  <!-- CSS Files -->
  <link rel='stylesheet' href="{% static 'css/material-kit.css' %}">
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link rel='stylesheet' href="{% static 'demo/demo.css' %}">
  <!-- <link rel='stylesheet' href="{% static 'css/register.css' %}"> -->
  <!-- <link href="../assets/demo/demo.css" rel="stylesheet" /> -->

  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->
  <!-- <link rel="stylesheet" type="text/css" media="screen" href="{% static 'css/test_management.css' %}" />
    <link rel="stylesheet" type="text/css" media="screen" href="{% static 'css/bootstrap-select.min.css' %}" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet"> -->

</head>

<body class="signup-page sidebar-collapse">

{% block content %}
<nav class="navbar navbar-expand-lg bg-rose">
  <img src="../static/img/kit-11.png" style="height: 70px; margin-left: 25px;">
  <div class="form-group col-md-9">
    <h3 class="card-title text-center" style="color: white; width: 100%;"><b>ONLINE EXAMINATION SYSTEM</b></h3>
    </div>
</nav>

<div class="page-header header-filter" filter-color="purple" style="background-image: url('../static/img/kit.jpg')">
  <div class="page-header header-filter" filter-color="purple" >
    <div class="container">
      <div class="card card-signup center">
        <h2 class="card-title text-center">Register</h2>
        <form style="width: 100%;" name="form" method="POST" action="{% url 'register' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <!-- <form class="form" method="" action=""> -->
                    <table class="center">
                    <tr>
                    <td>
                    <div class="form-group">
                      <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text">
                      <i class="material-icons">account_circle</i>
                         </span>
                        </div>
                     <input type="text" required pattern="[a-z-A-Z]*" class="form-control" name="firstname" id="firstname" required="true" placeholder="First Name..."/>
                      </div>
                    </div>
                    </td>
                       <!-- &nbsp; &nbsp;  &nbsp;  &nbsp;  --> 
                        <td>
                          <div class="form-group">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              
                        </div>
                         <input type="text" class="form-control" pattern="[a-z-A-Z]*" name="lastname" required="true" placeholder="Last Name..."/>
                        </div>
                       </div>
                           </td>
                          </tr>
                        <tr>
                        <td>
                          <div class="form-group">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">
                            <i class="material-icons">email</i>
                               </span>
                        </div>
                     <input type="email" class="form-control" name="email" pattern="^[a-zA-Z0-9_!#$%&'*+/=?`{|}~^-]+(?:\\.[a-zA-Z0-9_!#$%&'*+/=?`{|}~^-]+)*@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$"  required="true" placeholder="Email..."/>
                      </div>
                      <!-- [a-zA-Z0-9_\.\+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-\.]+$ -->
                      <!-- [0-9a-zA-Z@._\+\-]+$ -->
                    </div>
                          </td>
                          <td>
                          <div class="form-group">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">
                            <i class="material-icons">phone</i>
                               </span>
                        </div>
                     <input type="text" class="form-control" pattern="[-+()\\s0-9]+$" minlength="8" maxlength="15" name="phonenumber" accept="0" required="true" placeholder="DialingCode+PhoneNumber"/>
                     <!--[-+()\\s0-9]+$  ^\([+ ][0-9]{2,3}\)[0-9]{8,14}$ (+888)must to do-->
                      </div>
                    </div>
                          </td>
                          </tr>
                          <tr>
                            <td>
                          
                          <div class="form-group">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">
                            <i class="material-icons">school</i>
                               </span>
                        </div>
                     <input type="text" class="form-control" pattern="^[a-zA-Z0-9_]+( [a-zA-Z0-9_]+)*$" name="sname" required="true" placeholder="School Name..."/>
                     <!-- [a-z-A-Z]* -->
                      </div>
                    </div>
                          </td>
                            <td>
                         <div class="form-group">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">
                            <i class="material-icons">date_range</i>
                               </span>
                        </div>
                     <input type="date" id="datefield" type='date' min='1980-01-01' max='2018-12-12' class="form-control" name="birthday"  required="true"
                     placeholder="Birthday"/>
                      </div>
                    </div>
                          </td>
                          </tr>
                          <tr>
                           <td>
                          <div class="form-group">
                          <div class="input-group">
                            <div class="input-group-prepend">
                              <span class="input-group-text">
                              <i class="material-icons">add_location</i>
                              </span>
                            </div>
                            <input type="text" class="form-control" name="address"  required="true" placeholder="Address..."/>
                          </div>
                        </div>
                          </td>
                          </tr>
                          <div>
                          <tr>
                            <td>
                              <!--Changed => Moonlight-->
                              <b style="margin-left: 5px;">Student ID Card</b>
                              <br>
                              <!-- might change -->
                               <input required="true" name="card_id" class="btn btn-round add-btn" type="file" id="fileName" accept=".jpg,.jpeg,.png" onchange="validateFileType()"/>
                            </td>
                            <td>
                                <!--Changed => Moonlight-->
                            <b style="margin-left: 5px;">Student Profile</b>
                            <br>
                             <input required="true" id="student_profile" value="student_profile" name="student_profile" class="btn btn-round add-btn" type="file" accept=".jpg,.jpeg,.png" onchange="validateFileType()" />
                            </td>
                          </tr>
                          </div>
                        <br>
                        <br>
                      <tr>
                        <td>
                          <label for="country" style="color: black; margin: 0 4px;"><b>COUNTRY</b></label>
                          <select id="country" name="country" style="border-radius: 5px; padding: 6px; width: 74%; margin: 0 5px; box-shadow: 0px 2px 5px 0px;" required="True">
                          </select>
                        </td> 
                    
                        
                        <!-- </tr>
                        <tr> -->
                        <td>
                          <label for="city" style="color: black; margin-left: 13px;"><b>CITY</b></label>
                          <select id="state" name="city" style="border-radius: 5px; padding: 6px; width: 92%;margin: 0 5px; box-shadow: 0px 2px 5px 0px;" required="True">
                          </select>
                        </td>
                      </tr>

                      
                      <tr>
                        <td>
                      <div class="form-check">
                        <label class="form-check-label">
                          <input class="form-check-input" type="checkbox" value="" required="true" />
                          <span class="form-check-sign">
                            <span class="check"></span>
                          </span>
                          I agree to the 
                          <!-- sokmeng -->
                          <a href="#modal" id="myBtn">terms and conditions</a>.
                            <div id="myModal" class="modal">
                              <div class="modal-content" style="width: 50%">
                                <span class="close">&times;</span>
                                  <p>Please confirm that all of the information provided above is true and no any information is found to be a fraud, or your application will not be considered.</p>
                              </div>
                            </div>
                            <!--  -->
                        </label>
                        </div>
                                </td>
                              </tr>
                        </table>
                    <div class="text-center">
                      <input src="{% url 'model_form_upload' %}" type="submit" value="Register"/>
                    </div>
                 </form>
              </div>
            </div>
            </div>
          </div>
  
  <!-- Advanced Modal -->


{% endblock content %}

  {% block extra_js %}
  <!-- Code to handle the server response -->
    <script type="text/javascript" src="{% static 'js/material-kit.js' %}"></script>

    <script src="{% static 'js/core/jquery.min.js' %}"></script>
    <script src="{% static 'js/core/popper.min.js' %}"></script>
    <script src="{% static 'js/core/bootstrap-material-design.min.js' %}"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<!-- 
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="themes/default/bootstrap/js/bootstrap.js"></script> -->
  <script type="text/javascript">
    $(document).ready(function(){
        // Countries
        var country_arr = new Array();
        country_arr[0]="Select Country";
        country_arr[1]="CAMBODIA";
        country_arr[2]="JAPAN";
        country_arr[3]="INDIA";
        // country_arr[3]="";
        // country_arr[4]="";
        // country_arr[5]="";
        // country_arr[6]="";
        $.each(country_arr, function (i, item) {
            $('#country').append($('<option>', {
                value: i,
                text : item,
            }, '</option>' ));
        });
        // States
        var s_a = new Array();
        s_a[0]="Select State";
        s_a[1]="Select State|Phnom Penh|Banteay Meanchey|Battambang|Kampong Cham|Kampong Chhnang|Kampong Speu|Kampong Thom|Kampot|Kandal|Koh Kong|Kep|Kratié|Mondulkiri|Oddar Meanchey|Pailin|Sihanoukville|Preah Vihear|Pursat|Prey Veng|Ratanakiri|Siem Reap|Stung Treng|Svay Rieng|Takéo|Tbong Khmum";
        s_a[2]="Select State|Hokkaido|Iwate|Fukushima|Nagano|Niigata|Akita|Gifu|Aomori|Yamagata|Kagoshima|Hiroshima|Hyogo|Shizuoka|Miyagi|Kochi|Okayama|Kumamoto|Shimane|Miyazaki|Tochigi|Gunma|Yamaguchi|Ibaraki|Oita|Mie|Ehime|Chiba|Aichi|Fukuoka|Wakayama|Kyoto|Yamanashi|Toyama|Fukui|Ishikawa|Tokushima|Nagasaki|Shiga|Saitama|Nara|Tottori|Saga|Kanagawa|Okinawa|Tokyo|Osaka|Kagawa";
        s_a[3]="Select State|ANDHRAPRADESH|ARUNACHALPRADESH|ASSAM|BIHAR|CHHATTISGARH|HARYANA|HIMACHALPRADESH|JUMMU & KHASIMAR|JHARKHAND|KERALA|MANINPUR|MEGHALAYA|MIZORAM|NAGALAND|ODISHA|PUNJAB|SIKKIM|TELENGANA|TRIPURA|UTTAPRADESH|UTTARACKHAND|KARNATAKA|TAMILNADU|DELHI|GOA|W-BENGAL|GUJARAT|MADHYAPRADESH|MAHARASHTRA|RAJASTHAN";
        // s_a[3]="Select State|AUCKLAND";
        // s_a[4]="Select State|NEWJERSEY|ILLINOIS";
        // s_a[5]="Select State|DUBAI";
        // s_a[6]="Select State|MAURITIUS";
        // Cities
        // var c_a = new Array();
        // c_a['QUEENSLAND']="BRISBANE";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['']="";
        // c_a['NAGALAND']="KOHIMA";
        // c_a['ODISHA']="BHUBANESWAR";
        // c_a['PUNJAB']="Chandigarh";
        // c_a['SIKKIM']="Gangtok";
        // c_a['TELENGANA']="Hyderabad";
        // c_a['TRIPURA']="Agartala";
        // c_a['UTTAPRADESH']="Lucknow";
        // c_a['UTTARACKHAND']="Dehradun";
        // c_a['ANDHRAPRADESH']="HYDERABAD";
        // c_a['ARUNACHALPRADESH']="ITANAGAR";
        // c_a['ASSAM']="DISPUR";
        // c_a['BIHAR']="PATNA";
        // c_a['CHHATTISGARH']="RAIPUR";
        // c_a['HARYANA']="CHANDIGARH|PUNJAB";
        // c_a['HIMACHALPRADESH']="SHIMLA";
        // c_a['JUMMU & KHASIMAR']="SRINAGAR|JAMMU";
        // c_a['JHARKHAND']="RANCHI";
        // c_a['KERALA']="THIRUVANANTHAPURAM";
        // c_a['MANINPUR']="IMPHAL";
        // c_a['MEGHALAYA']="SHILLONG";
        // c_a['MIZORAM']="AIZAWL";
        // c_a['KARNATAKA']="BANGLORE";
        // c_a['TAMILNADU']="CHENNAI";
        // c_a['DELHI']="DELHI";
        // c_a['GOA']="GOA";
        // c_a['W-BENGAL']="KOLKATA";
        // c_a['GUJARAT']="AHMEDABAD1|AHMEDABAD2|AHMEDABAD3|BARODA|BHAVNAGAR|MEHSANA|RAJKOT|SURAT|UNA";
        // c_a['MADHYAPRADESH']="INDORE";
        // c_a['MAHARASHTRA']="MUMBAI|PUNE";
        // c_a['RAJASTHAN']="ABU";
        $('#country').change(function(){
            var c = $(this).val();
            var state_arr = s_a[c].split("|");
            $('#state').empty();
            $('#city').empty();
            if(c==0){
                $('#state').append($('<option>', {
                    value: '0',
                    text: 'Select State',
                }, '</option>'));
            }else {
                $.each(state_arr, function (i, item_state) {
                    $('#state').append($('<option>', {
                        value: item_state,
                        text: item_state,
                    }, '</option>'));
                });
            }
            // $('#city').append($('<option>', {
            //     value: '0',
            //     text: 'Select City',
            // }, '</option>'));
        });
        $('#state').change(function(){
            var s = $(this).val();
            if(s=='Select State'){
                $('#city').empty();
                $('#city').append($('<option>', {
                    value: '0',
                    text: 'Select City',
                }, '</option>'));
            }
            var city_arr = c_a[s].split("|");
            $('#city').empty();
            $.each(city_arr, function (j, item_city) {
                $('#city').append($('<option>', {
                    value: item_city,
                    text: item_city,
                }, '</option>'));
            });
        });
    });
</script>
    <script language="JavaScript">
      var today = new Date();
      var dd = today.getDate();
      var mm = today.getMonth()+1; //January is 0!
      var yyyy = today.getFullYear();
       if(dd<10){
              dd='0'+dd
          } 
          if(mm<10){
              mm='0'+mm
          } 
      today = yyyy+'-'+mm+'-'+dd;
      document.getElementById("datefield").setAttribute("max", today);
    var input = document.querySelector("[name=firstname]");
    input.oninput = function(event) {
        event.target.setCustomValidity("");
    };
    input.oninvalid = function(event) {
        event.target.setCustomValidity("Special characters are not allowed.");
    };
    var input = document.querySelector("[name=lastname]");
    input.oninput = function(event) {
        event.target.setCustomValidity("");
    };
    input.oninvalid = function(event) {
        event.target.setCustomValidity("Special characters are not allowed.");
    };
    var input = document.querySelector("[name=sname]");
    input.oninput = function(event) {
        event.target.setCustomValidity("");
    };
    input.oninvalid = function(event) {
        event.target.setCustomValidity("Special characters are not allowed.");
    };
    var input = document.querySelector("[name=phonenumber]");
    input.oninput = function(event) {
        event.target.setCustomValidity("");
    };
    input.oninvalid = function(event) {
        event.target.setCustomValidity("Characters are not allowed.");
    };
    // email
    var input = document.querySelector("[name=email]");
    input.oninput = function(event) {
        event.target.setCustomValidity("");
    };
    input.oninvalid = function(event) {
        event.target.setCustomValidity("Please Enter the correct Email");
    };
    // 
    function validateFileType(){
        var fileName = document.getElementById("fileName").value;
        var idxDot = fileName.lastIndexOf(".") + 1;
        var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
        if (extFile=="jpg" || extFile=="jpeg" || extFile=="png"){
            //TO DO
        }else{
            alert("You should input Candidate Profile before you input Student ID Card");
            // Only jpg/jpeg and png files are allowed!
        }   
    }
    function take_snapshot() {    
      var firstname = document.getElementById('firstname').value;
      webcam.set_api_url('/save_image/'+escape(firstname)+'/' );
      webcam.set_hook( 'onComplete', 'my_completion_handler' );
      // take snapshot and upload to server
      webcam.snap();
      alert("Your Photo has been saved!")
    }
    function my_completion_handler(msg) {
      if (msg.match(/(\/media\/\S+)/)) {
        var image_url = RegExp.$1;
        // show JPEG image in page
        document.getElementById('fotoview').innerHTML =
          '<label>Fotografía</label>' +
          '<img src="' + image_url + '" class="img-polaroid" >';
        // reset camera for another shot
        webcam.reset();
        alert("Your Photo has been saved!")
      }
      else alert("Python Error: " + msg);
    }
        // $(".hidelogopenreg").click( function() {  // opening on same line K&R style
        //   $('#cancel').modal('hide')
        //   \
        //  }
         // $('#modal').modal('hide')

// pop up terms and conditions
var modal = document.getElementById('myModal');

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}
// pop up

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
  </script>
{% endblock extra_js %}

</body>
</html>